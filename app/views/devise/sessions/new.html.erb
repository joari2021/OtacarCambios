<div class="container">

    <div class="forms-container">

        <div class="signin-signup">

            <%if alert%>
            <div id="alert" class="show showAlert">
                <span class="fas fa-exclamation-circle"></span>
                <p class="msg text-justify"><%=alert%></p>
            </div>
            <%end%>
            <%if notice%>
                <div id="notice" class="show showAlert">
                <span class="fas fa-check-circle"></span>
                <p class="msg text-justify"><%=notice%></p>
            </div>
            <%end%>
            <%= form_for(resource, as: resource_name, url: session_path(resource_name),:html => {:class => "sign-in-form"}) do |f| %>

            <h2 class="title" style="margin-top:90px">Iniciar Sesion</h2>
            <div class="input-field">
                <i class="fas fa-envelope"></i>
                <%= f.email_field :email, autofocus: true, autocomplete: "email", placeholder: "Correo Electronico" %>
            </div>
            <div class="input-field">
                <i class="fas fa-lock"></i>
                <%= f.password_field :password, autocomplete: "current-password", placeholder: "Contraseña" %>
            </div>

            <%= f.submit "Continuar", class:"btn solid"%>

            <a href="/users/password/new">Olvidaste tu contraseña?</a>
            <a href="/users/confirmation/new">No has recibido las instrucciones de confirmacion?</a>
            <%end%>
            

            <%= form_for(resource, as: resource_name, url: registration_path(resource_name),:html => {:class => "sign-up-form"}) do |f| %>
            <%= render "devise/shared/error_messages", resource: resource %>
            <h2 class="title">Registro</h2>

            <div class="input-field">
                <i class="fas fa-envelope"></i>
                <input class="" placeholder="Correo Electronico" name="user[email]" autofocus="autofocus" autocomplete="autocomplete" id="email" value="" type="email" required></input>
            </div>
            <div class="input-field">
                <i class="fas fa-address-card"></i>

                <input class="" placeholder="Nro Documento" name="user[document]" autocomplete="autocomplete" value="" type="number" onkeypress="return soloNumeros(event,this)" required></input>
            </div>
            <div class="input-field">
                <i class="fas fa-lock"></i>
                <%= f.password_field :password, autocomplete: "new-password", required: :required, id:"contraseña", placeholder:"Contraseña", minlength: "8"%>
            </div>

            <div class="input-field">
                <i class="fas fa-lock"></i>
                <%= f.password_field :password_confirmation, autocomplete: "new-password", placeholder: "Confirmar Contraseña", minlength: "8"%>
            </div>

            <%= f.submit "Continuar", class:"btn" %>
            <%end%>
        </div>
    </div>

    <div class="panels-container">
        <div class="panel left-panel">
            <div class="content">
                <h3>Eres nuevo aqui ?</h3>
                <p>
                    Registrate y comienza a realizar envios de remesas a las mejores tasas del mercado
                </p>
                <button class="btn transparent" id="sign-up-btn">
                    Registrarme
                </button>
            </div>
            <img src="/img/log.svg" class="image" alt="" />
        </div>
        <div class="panel right-panel">
            <div class="content">
                <h3>Eres uno de nosotros ?</h3>
                <p>
                    Inicia sesion con tu correo y contraseña y disfruta de nuestros servicios
                </p>
                <button class="btn transparent" id="sign-in-btn">
                    Iniciar Sesion
                </button>
            </div>
            <img src="/img/register.svg" class="image" alt="" />
        </div>
    </div>
</div>

<script>

    <%if alert%>
    var campoAlerta = document.getElementById("alert");
    setTimeout(() => {
        campoAlerta.classList.add("hide");
        campoAlerta.classList.remove("show");
    }, 5000);
    <%end%>

    <%if notice%>
    var campoAlerta = document.getElementById("notice");
    setTimeout(() => {
        campoAlerta.classList.add("hide");
        campoAlerta.classList.remove("show");
    }, 5000);
    <%end%>

    const sign_in_btn = document.querySelector("#sign-in-btn");
    const sign_up_btn = document.querySelector("#sign-up-btn");
    const container = document.querySelector(".container");
    
    sign_up_btn.addEventListener("click", () => {

        <%if alert || notice%>
        campoAlerta.classList.add("hide");
        campoAlerta.classList.remove("show");
        campoAlerta.classList.remove("showAlert");
        <%end%>
        container.classList.add("sign-up-mode");

    });

    sign_in_btn.addEventListener("click", () => {
        container.classList.remove("sign-up-mode");
    });

    function soloNumeros(e, input) {
        key = e.keyCode || e.which;
        tecla = String.fromCharCode(key).toLowerCase();
        letras = "1234567890";
        especiales = [];

        if (letras.indexOf(tecla) == -1) {

            return false;

        } else {

            valor = input.value.toLowerCase();
            valor = valor.concat("", tecla);

            return true;
        }
    }
</script>